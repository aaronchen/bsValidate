<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>bsValidate</title>

  <script src="https://code.jquery.com/jquery-3.6.3.min.js"
    integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
    crossorigin="anonymous"></script>

  <script src="/jquery.bsValidate.js"></script>

  <script>
    $(function () {
      $(document).on('submit', '#addUser', function (event) {
        event.preventDefault();

        $('.bs-validate').trigger('submit');

        if (this.checkValidity()) {
          console.log('this form is valid');
        }
      });

      $(document).on('reset', '#addUser', function (event) {
        $('.bs-validate').trigger('reset');
      });
    });

    function outputValue(el) {
      console.log(el.val());
    }

    function firstNameValidation(el) {
      el.showSpinner();
      new Promise((resolve) => setTimeout(resolve, 3000))
        .then(() => {
          console.log(el);
          el.removeSpinner()
        });
    }
  </script>
</head>

<body>
  <div class="container-fluid px-5 pt-3">

    <div class="h3">bsValidate</div>

    <div class="card">
      <div class="card-body p-5">
        <form id="addUser" autocomplete="off" action="" novalidate>
          <fieldset>
            <div class="form-group row">
              <label for="firstName" class="col-2 col-form-label">First Name</label>
              <div class="col-10">
                <input type="text" class="form-control bs-validate" name="firstName" id="firstName" minlength="2"
                  maxlength="40" data-hint="2 to 40 charcters required" data-hint-on-focus="true"
                  data-on-input="outputValue" data-on-valid="firstNameValidation" data-spinner-class="text-info"
                  data-max-length-helper="true" required />
              </div>
            </div>

            <div class="form-group row">
              <label for="lastName" class="col-2 col-form-label">Last Name</label>
              <div class="col-10">
                <input type="text" class="form-control bs-validate" name="lastName" id="lastName" minlength="2"
                  maxlength="40" data-hint="2 to 40 charcters required" data-max-length-helper="true" required />
              </div>
            </div>

            <div class="form-group row">
              <label for="email" class="col-2 col-form-label">Email</label>
              <div class="col-10">
                <input type="email" class="form-control bs-validate" name="email" id="email"
                  pattern=".+?\.[a-zA-Z0-9]{2,}$"
                  data-pattern-mismatch-error-message="is not ending with a valid TLD domain" required />
              </div>
            </div>

            <div class="form-group row">
              <label for="email" class="col-2 col-form-label">Age</label>
              <div class="col-10">
                <input type="number" class="form-control bs-validate" name="age" id="age" min="18" max="65" step="1"
                  data-hint="Enter a number between 18 to 65 in steps of 1" required />
              </div>
            </div>

            <div class="form-row">
              <div class="col-12 text-right">
                <button type="submit" class="btn btn-primary">Create</button>
                <button type="reset" class="btn btn-outline-danger">Reset</button>
              </div>
            </div>

          </fieldset>
        </form>
      </div>
    </div>

  </div>
</body>

</html>